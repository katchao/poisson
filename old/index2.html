<html>
<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>

	<script type=text/javascript>
		var img = $("<img />").attr('src', 'http://images.askmen.com/galleries/men/nicolas-cage/pictures/nicolas-cage-picture-3.jpg').load(function() {
			if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
				alert('broken image!');
			} else {
				$("#something").append(img);
			}
		});
	

	</script>
	
	<h1>jQuery Example</h1>
	
	<p><input type=text size=5 name=a> +
	   <input type=text size=5 name=b> =
	   <span id=result>?</span>

	<p><a href=# id=calculate>calculate server side</a>
	
	
	
	
	<h2>Image Upload Example</h2>
	
	<form id="form1" enctype="multipart/form-data" action="" method="post">
		<input type="file" id="file" name="file" />
		<input type="submit" id="start-button" value="Start Processing" disabled>
	</form>
	
	<p>The current uploaded file is:<br />
	<img id="blah" src="#" alt="your image" />
	<img id="blah2" src="#" alt="your image" /></p>
	
	<script>
	function readURL(input) {

		if (input.files && input.files[0]) {
			var reader = new FileReader();

			reader.onload = function (e) {
				$('#blah').attr('src', e.target.result);
			}

			reader.readAsDataURL(input.files[0]);
		}
	}

	$("#file").change(function(){
		readURL(this);
		$("#start-button").attr("disabled", false);
	});
	
	$(function() {
		$('#calculate').bind('click', function() {
			$.ajax({
			  dataType: "json",
			  url: $SCRIPT_ROOT + '/_add_numbers',
			  data: { a: $('input[name="a"]').val(),
					  b: $('input[name="b"]').val() },
			  success: function(data) {
				console.log(data.result);
				$("#result").html(data.result);
				}
			});
		});
		
		$( '#form1' ).submit(function ( e ) {
			var data;

			fd = new FormData();
			fd.append( 'file', input.files[0] );
			
			console.log(fd);

			$.ajax({
				url: '/stuff',
				data: fd,
				processData: false,
				type: 'POST',
				contentType: 'multipart/form-data',
				success: function ( data ) {
					console.log(data.result);
					$("#blah2").html(data.result);
					return false;
				}
			});

			e.preventDefault();
			return false;
		});
		

		
	});
	</script>
	
	
	
	
	
	<h2>Image Example</h2>
	
	<p><a href="#" id="image_process">process image</a></p>
	<p><div id="something"> </div></p>
	

</body>
</html>